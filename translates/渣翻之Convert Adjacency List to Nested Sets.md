## 渣翻之Convert Adjacency List to Nested Sets

最近接到任务，需要使用Nested Sets模型进行数据库的设计。找了很多资料。最终发现这一篇文章解释的还是蛮清晰的。并且比较了几种常见的数据模型。

原文 [链接](https://blogs.msdn.microsoft.com/mvpawardprogram/2012/06/25/hierarchies-convert-adjacency-list-to-nested-sets/)

### 正文开始

#### 介绍

如果你在网络上搜寻关于SQL Server中分层数据的文章，你会发现存储在数据库中的有很多层次类型？？和层次结构。对于大多数的我们来说，分层通常是一些类似组织结构图的东西，并且一般以三种基本的层次结构中的一种来进行存储。但是，即使是最基本的简易的层次模型，如何在T-SQL中使用它们也是一个十分巨大的主题。我不会希望正式的去说明，而只是通过一一篇相对较短的文章去说明它。

这篇文章覆盖了很多不同的并且在短时间内十分先进的技术，我不得不假设你有了相当的一部分预备知识。比如，我假设你知道一些有关递归的通用表达式、数字或者数字表、以及他们如何在一个循环中替换。甚至对于本文将要讲述的3种层次结构的基本知识。

这篇文章并不是说明如何使用这三种层次结构。只是关于如何将邻接表结构转换成嵌套集合结构。

带着这个想法，我们先快速的头脑风暴一下层次结构的基本类型，然后很快投入到将一个邻接表结构的模型转换成层次结构的天堂--嵌套集合模型的方法中去。

### 邻接表结构